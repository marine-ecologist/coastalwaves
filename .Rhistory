tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="wave exposure", title.size=1.2)) +
tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="wave exposure", title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="mean wave\n exposure \n((J/m/s)", title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\n exposure \n(J/m/s)", title.font="helvetica",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\n exposure \n(J/m/s)",
title.fontface="helvetica",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\n exposure \n(J/m/s)",
title.fontface="arial",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\n exposure \n(J/m/s)",
title.fontface="Arial",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\n exposure \n(J/m/s)",
title.fontfamily="Arial",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\n exposure \n(J/m/s)",
title.fontfamily="Helvetica",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\nexposure \n(J/m/s)",
title.fontfamily="Helvetica",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid |> st_crop(insetbbox)) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend=tm_legend_hide(),
label.format = tm_label_format(scientific = TRUE)) +
tm_scalebar(position = c("left", "bottom"))
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend=tm_legend_hide(),
label.format = tm_label_format(scientific = TRUE)) +
tm_scalebar(position = c("left", "bottom"))
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid |> st_crop(insetbbox)) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\nexposure \n(J/m/s)",
title.fontfamily="Helvetica",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("left", "center"))#, bg.color = "grey95")
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid |> st_crop(insetbbox)) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\nexposure \n(J/m/s)",
title.fontfamily="Helvetica",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("right", "center"))#, bg.color = "grey95")
fn_ribbons_wave_grid
fn_ribbons_waves
fn_ribbons_wind
range(fn_ribbons_wind$windspeed_ms)
360/7.5
devtools::load_all(".")
### get waves
fn_ribbons_waves <- calculate_wave_exposure(wind = fn_ribbons_wind,
fetch = fn_ribbons_fetch,
points = fn_ribbons_points,
parallel = TRUE,
cores = 8)
head(fn_ribbons_waves)
tmap_mode("View") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid |> st_crop(insetbbox)) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\nexposure \n(J/m/s)",
title.fontfamily="Helvetica",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("right", "center"))#, bg.color = "grey95")
tmap_mode("view") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid |> st_crop(insetbbox)) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\nexposure \n(J/m/s)",
title.fontfamily="Helvetica",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("right", "center"))#, bg.color = "grey95")
fn_ribbons
gbr_shape <- download_gbr_spatial(return = "base")
gbr_shape |>
filter(grepl("12-032|12-037|12-038|12-032|12-031", LOC_NAME_S))
?calculate_wave_exposure
build_site()
insetbbox <- st_bbox(c(xmin=1472028, xmax=8645891, ymin=1476703, ymax=8648071))
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid |> st_crop(insetbbox)) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\nexposure \n(J/m/s)",
title.fontfamily="Helvetica",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("right", "center"))#, bg.color = "grey95")
insetbbox <- st_bbox(c(xmin=1472028, xmax=8645891, ymin=1476703, ymax=8648071))
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid |> st_crop(insetbbox)) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\nexposure \n(J/m/s)",
title.fontfamily="Helvetica",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("right", "center"))#, bg.color = "grey95")
library(tmap)
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend=tm_legend_hide(),
label.format = tm_label_format(scientific = TRUE)) +
tm_scalebar(position = c("left", "bottom"))
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend=tm_legend_hide(),
label.format = tm_label_format(scientific = TRUE)) +
tm_scalebar(position = c("left", "bottom"))
build_site()
old_min <- 38
new_min <- 2
speedup_factor <- old_min / new_min
percent_speedup <- (speedup_factor - 1) * 100
percent_time_reduction <- (old_min - new_min) / old_min * 100
sprintf("Speedup: %.1fx (+%.0f%%); Time reduction: %.1f%%",
speedup_factor, percent_speedup, percent_time_reduction)
# "Speedup: 19.0x (+1800%); Time reduction: 94.7%"
build_site()
build_site()
unlink("docs", recursive = TRUE)
pkgdown::build_site(preview = FALSE, devel = FALSE, lazy = FALSE)
unlink("docs", recursive = TRUE)
pkgdown::build_site(preview = FALSE, devel = FALSE, lazy = FALSE)
pkgdown::build_favicons()
pkgdown::build_favicons(overwrite=TRUE)
unlink("docs", recursive = TRUE)
pkgdown::build_site(preview = FALSE)
library(coastalwaves)
library(dhw)
library(sf)
library(tidyverse)
library(lubridate)
library(ggplot2)
### download GBR shape file
gbr_shape <- download_gbr_spatial(return = "base") |>
select(LOC_NAME_S, X_COORD, Y_COORD) |>
st_make_valid() |>
st_transform(20353)
### Grep subset for target reefs, create union
fn_ribbons <- gbr_shape |>
filter(grepl("12-032|12-037|12-038|12-032|12-031", LOC_NAME_S))
fn_ribbons_union <- fn_ribbons |>
st_union() |>
st_boundary() |>
st_cast("LINESTRING")
# Extract broader region
fn_ribbons_region <- st_crop(gbr_shape,
fn_ribbons_union |>
st_union() |>
st_centroid() |>
st_buffer(20000))
# get points
fn_ribbons_points <- calculate_points(fn_ribbons_union, 100)
### calculate fetch
fn_ribbons_fetch <- calculate_fetch(point = fn_ribbons_points,
degrees = 7.5,
fetch = 5000,
land = fn_ribbons_region,
parallel = TRUE,
cores = 8)
### get wind data
#fn_ribbons_wind <- get_wind_data(st_centroid(st_union(fn_ribbons)), "1989-09-01", "1989-09-10")
fn_ribbons_wind <- read.csv("/Users/rof011/coastalwaves/data/df_ngbr.csv") |>
rename(windspeed_ms = wspeed, date=time)
### get waves
fn_ribbons_waves <- calculate_wave_exposure(wind = fn_ribbons_wind,
fetch = fn_ribbons_fetch,
points = fn_ribbons_points,
parallel = TRUE,
cores = 8)
fn_ribbons_wave_grid <- create_wave_grid(fn_ribbons_union, fn_ribbons_waves, interval = 100, width = 100)
library(tmap)
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend=tm_legend_hide(),
label.format = tm_label_format(scientific = TRUE)) +
tm_scalebar(position = c("left", "bottom"))
insetbbox <- st_bbox(c(xmin=1472028, xmax=8645891, ymin=1476703, ymax=8648071))
tmap_mode("plot") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_ribbons_wave_grid |> st_crop(insetbbox)) +
tm_polygons(fill="wave_energy_mean", shape=21, size=0.8, fill_alpha=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"),
fill.legend = tm_legend(title="Mean wave\nexposure \n(J/m/s)",
title.fontfamily="Helvetica",title.size=1)) +
tm_components(c("tm_legend"), position = tm_pos_out("right", "center"))#, bg.color = "grey95")
library(devtools)
load_all()
conflicted::conflicts_prefer(dplyr::filter)
library(coastalwaves)
library(dhw)
library(sf)
library(tidyverse)
library(lubridate)
library(ggplot2)
### download GBR shape file
gbr_shape <- download_gbr_spatial(return = "base") |>
select(LOC_NAME_S, X_COORD, Y_COORD) |>
st_make_valid() |>
st_transform(20353)
### Grep subset for target reefs, create union
fn_capricorn <- gbr_shape |>
filter(grepl("23-052|23-053", LOC_NAME_S))
fn_capricorn_union <- fn_capricorn |>
st_union() |>
st_boundary() |>
st_cast("LINESTRING")
# Extract broader region
fn_capricorn_region <- st_crop(gbr_shape,
fn_capricorn_union |>
st_union() |>
st_centroid() |>
st_buffer(20000))
# get points
fn_capricorn_points <- calculate_points(fn_capricorn_union, 100)
### calculate fetch
fn_capricorn_fetch <- calculate_fetch(point = fn_capricorn_points,
degrees = 7.5,
fetch = 5000,
land = fn_capricorn_region,
parallel = TRUE,
cores = 8)
### get wind data
#fn_capricorn_wind <- get_wind_data(fn_capricorn, "1997-01-01", "1997-12-31")
#fn_capricorn_wind <- get_wind_data(st_centroid(st_union(fn_capricorn)), "1989-09-01", "1989-09-10")
fn_capricorn_wind <- read.csv("/Users/rof011/coastalwaves/data/df_sgbr.csv") |> rename(windspeed_ms = wspeed, date=time)
### get waves
fn_capricorn_waves <- calculate_wave_exposure(wind = fn_capricorn_wind,
fetch = fn_capricorn_fetch,
points = fn_capricorn_points,
parallel = TRUE,
cores = 8)
fn_capricorn_wave_grid <- create_wave_grid(fn_capricorn_union, fn_capricorn_waves, interval = 100, width = 100)
library(tmap)
tmap_mode("view") +
tm_basemap("Esri.WorldImagery") +
tm_shape(fn_capricorn_wave_grid) +
tm_polygons(fill="wave_energy_total", shape=21, size=0.8,
fill.scale=tm_scale_continuous(values="-brewer.spectral"))
library(coastalwaves)
library(dhw)
library(sf)
library(tidyverse)
library(lubridate)
library(ggplot2)
### download GBR shape file
gbr_shape <- download_gbr_spatial(return = "base") |>
select(LOC_NAME_S, X_COORD, Y_COORD) |>
st_make_valid() |>
st_transform(20353)
### Grep subset for target reefs
whitsundays <- gbr_shape |>
filter(grepl("Hook|Hayman|reef", LOC_NAME_S)) |>
filter(grepl("20", LOC_NAME_S)) |>
mutate(habitat = if_else(!grepl("Reef", LOC_NAME_S), "island", "reef"))
ggplot() + theme_bw() +
geom_sf(data=whitsundays, aes(fill=habitat), show.legend=FALSE) +
scale_fill_manual(values = c("island" = "#ffffc0", "reef" = "#e6f8ff"))
whitsundays_union <- whitsundays |>
st_union() |>
st_boundary() |>
st_cast("LINESTRING")
ggplot() + theme_bw() +
geom_sf(data=whitsundays, aes(fill=habitat), show.legend=FALSE) +
scale_fill_manual(values = c("island" = "#ffffc0", "reef" = "#e6f8ff")) +
geom_sf(data=whitsundays_union, show.legend=FALSE, linewidth=2)
### extract broader region for fetch (50km from focus reefs)
whitsundays_region <- st_crop(gbr_shape,
whitsundays |>
st_union() |>
st_centroid() |>
st_buffer(20000))
ggplot() + theme_bw() +
geom_sf(data=whitsundays_region, fill="white") +
geom_sf(data=whitsundays, aes(fill=habitat), show.legend=FALSE) +
scale_fill_manual(values = c("island" = "#ffffc0", "reef" = "#e6f8ff"))
whitsundays_weather <- readRDS("/Users/rof011/coastalwaves/data/whitsundays_weather.rds")
bearingplot <- whitsundays_weather |>
mutate(time = ymd_hms(time)) |>
mutate(year = as.factor(year(date))) |>
mutate(time_3hr = lubridate::floor_date(time, unit = "3 hours")) |>
group_by(time_3hr, year) |>
summarise(
speed = max(windspeed_ms, na.rm = TRUE),
bearing = mean(bearing, na.rm = TRUE),
.groups = "drop"
) |>
ggplot() + theme_bw() +
facet_wrap(~year, scales="free", nrow=2) +
scale_y_continuous(limits=c(0,359), breaks=seq(0,360,90)) +
geom_line(aes(x = time_3hr, y = bearing, color=year), show.legend=FALSE) +
labs(x = "Time (3-hourly)", y = "Bearing", title = "3-Hourly Average Wind Bearing")
speedplot <- whitsundays_weather |>
mutate(time = ymd_hms(time)) |>
mutate(year = as.factor(year(date))) |>
mutate(time_3hr = lubridate::floor_date(time, unit = "3 hours")) |>
group_by(time_3hr, year) |>
summarise(
speed = max(windspeed_ms, na.rm = TRUE),
bearing = mean(bearing, na.rm = TRUE),
.groups = "drop"
) |>
ggplot() + theme_bw() +
scale_y_continuous(limits=c(0,25)) +
facet_wrap(~year, scales="free", nrow=2) +
geom_line(aes(x = time_3hr, y = speed, color=year), show.legend=FALSE) +
labs(x = "Time (3-hourly)", y = "speed", title = "3-Hourly Average Wind Speed")
library(patchwork)
speedplot + bearingplot
whitsundays_daily <- whitsundays_weather %>%
filter(lubridate::month(date) == 11) %>%       # keep only November
group_by(date) %>%
summarise(
bearing = mean(bearing, na.rm = TRUE),
windspeed_ms = mean(windspeed_ms, na.rm = TRUE),
.groups = "drop"
)
whitsundays_points <- calculate_points(whitsundays_union, 20)
### plots below
library(patchwork)
pinnacle <- st_bbox(c(xmin=148.962, xmax=148.968, ymin=-20.063, ymax=-20.058), crs=4326) |> st_transform(20353)
pinnacle_sf <- st_as_sfc(pinnacle) |> st_sf()
main <- ggplot() + theme_bw() +
geom_sf(data=whitsundays, aes(fill=habitat), show.legend=FALSE) +
scale_fill_manual(values = c("island" = "#ffffc0", "reef" = "#e6f8ff")) +
geom_sf(data = whitsundays_points, shape=21, size=0.2) +
geom_sf(data = pinnacle_sf, fill=NA, color="red", linewidth=1) +
ggtitle("Whitsundays")
inset <- ggplot() + theme_bw() +
geom_sf(data=whitsundays |> st_crop(pinnacle), aes(fill=habitat), show.legend=FALSE, bbox=pinnacle) +
scale_fill_manual(values = c("island" = "#ffffc0", "reef" = "#e6f8ff")) +
geom_sf(data = whitsundays_points |> st_crop(pinnacle), shape=21, size=1, bbox=pinnacle) +
geom_sf(data = pinnacle_sf, fill=NA, color="red", linewidth=1) +
ggtitle("inset Pinnacle Bay")
main | inset
whitsundays_fetch <- calculate_fetch(point = whitsundays_points,
degrees = 7.5,
fetch = 20000,
land = whitsundays_region,
parallel = TRUE,
cores = 8)
ggplot() + theme_bw() +
geom_sf(data = whitsundays, aes(fill=habitat), show.legend=FALSE) +
scale_fill_manual(values = c("island" = "#ffffc0", "reef" = "#e6f8ff")) +
geom_sf(data = whitsundays_fetch |> filter(id %in% sample(whitsundays_fetch$id, 5)), linewidth=0.2, show.legend=FALSE)
whitsundays_waves <- calculate_wave_exposure(wind = whitsundays_daily,
fetch = whitsundays_fetch,
points = whitsundays_points,
parallel = TRUE,
cores = 8)
main_circles <- ggplot() + theme_bw() +
geom_sf(
data = whitsundays,
aes(fill = habitat),
color = "black",
linewidth=0.1,
show.legend=FALSE
) +
scale_fill_manual(values = c("island" = "#ffffc0", "reef" = "#e6f8ff")) +
ggnewscale::new_scale_fill() +
geom_sf(data = whitsundays_waves, aes(fill = wave_energy_total),
show.legend=FALSE, shape = 21, size = 3, stroke=0.1) +
scale_fill_distiller(palette = "RdYlBu", guide = guide_colorbar(title = "Wave Energy")) +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
geom_sf(data = pinnacle_sf, fill=NA, color="red", linewidth=1)
inset_circles <- ggplot() + theme_bw() +
geom_sf(
data = whitsundays|> st_crop(pinnacle),
aes(fill = habitat),
color = "black",
linewidth=0.1
) +
scale_fill_manual(values = c("island" = "#ffffc0", "reef" = "#e6f8ff")) +
ggnewscale::new_scale_fill() +
geom_sf(data = whitsundays_waves|> st_crop(pinnacle), aes(fill = wave_energy_total), shape = 21, size = 3, stroke=0.1) +
scale_fill_distiller(palette = "RdYlBu", guide = guide_colorbar(title = "Wave Energy")) +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
geom_sf(data = pinnacle_sf, fill=NA, color="red", linewidth=1)
main_circles | inset_circles
wave_grid <- create_wave_grid(whitsundays_union, whitsundays_waves, interval = 20, width = 20)
main_grid <- ggplot() + theme_bw() +
geom_sf(
data = whitsundays,
aes(fill = habitat),
color = "black",
linewidth=0.1,
show.legend=FALSE
) +
scale_fill_manual(values = c("island" = "#ffffc0", "reef" = "#e6f8ff")) +
ggnewscale::new_scale_fill() +
geom_sf(data = wave_grid, aes(fill = wave_energy_total),
show.legend=FALSE, shape = 21, size = 3, linewidth=0.1) +
scale_fill_distiller(palette = "RdYlBu", guide = guide_colorbar(title = "Wave Energy")) +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
geom_sf(data = pinnacle_sf, fill=NA, color="red", linewidth=1)
inset_grid <- ggplot() + theme_bw() +
geom_sf(
data = whitsundays|> st_crop(pinnacle),
aes(fill = habitat),
color = "black",
linewidth=0.1
) +
scale_fill_manual(values = c("island" = "#ffffc0", "reef" = "#e6f8ff")) +
ggnewscale::new_scale_fill() +
geom_sf(data = wave_grid|> st_crop(pinnacle), aes(fill = wave_energy_total), shape = 21, size = 3, linewidth=0.1) +
scale_fill_distiller(palette = "RdYlBu", guide = guide_colorbar(title = "Wave Energy")) +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
geom_sf(data = pinnacle_sf, fill=NA, color="red", linewidth=0.5)
main_grid | inset_grid
pkgdown::build_site(preview = FALSE)
build_readme()
pkgdown::build_site(preview = FALSE)
pkgdown::build_site(preview = FALSE)
?conflicted
pkgdown::build_site(preview = FALSE)
pkgdown::build_site(preview = FALSE)
pkgdown::build_site(preview = FALSE)
devtools::check()
check()
pkgdown::build_site()
pkgdown::clean_site(force = TRUE)
pkgdown::build_site()
?get_weather_data
get_weather_data
coastalwaves::get_weather_data()
usethis::use_pipe()
devtools::load_all(".")
coastalwaves::get_weather_data()
remove.packages(coastalwaves)
remove.packages("coastalwaves")
?get_weather_data()
get_weather_data()
devtools::load_all(".")
document()
library(devtools)
document()
devtools::load_all(".")
get_weather_data()
